//CRITICAL SECTION

//estrutura de dados
typedef struct{
	...
	CRITICAL SECTION *criticalSectionPartilhada;
}TDados;

//main
int _tmain(int argc, TCHAR* argv[]){
...
	TDados tdados[NTHREADS]
...
	CRITICAL_SECTION criticalSectionPartilhada;
	BOOL ii = InitializeCriticalSectionAndSpinCount (&criticalSectionPartilhada,200);
	...
	tdados[i].criticalSectionPartilhada = &criticalSectionPartilhada;
	...
	DeleteCriticalSection(&criticalSectionPartilhada);
...

//na thread
thread
...
	EnterCriticalSection(dados->criticalSectionPartilhada); -> == waitforsingleobject(...//inicio da zona critica)
		...
	LeaveCriticalSection(dados->criticalSectionPartilhada); -> == leave //fim da zona critica
...